<div class = "container new-post">
  <div class="row">
    <div class="small-8 small-centered medium-6 medium-center large-6 large-centered columns">
      <div ng-controller="PostCtrl">
          <div ng-init="getUserJourneys(true)">
            <h3>journey</h3>
            <div class="new-journey">
              <select
                ng-model="currentJourney"
                ng-options="journey as journey.title for journey in journeys">
              </select>
            </div>
          </div>
          <div class="new-journey-name"ng-if="currentJourney.title === 'Create a New Journey' && !currentJourney.id">
            <input class="journey-name"
              placeholder="name your journey"
              ng-model="newJourney.title"
              type="text"> <br>
            <input
              placeholder="pick a start date"
              ng-model="newJourney.start_date"
              type="date">
            <input
              placeholder="pick an end date"
              ng-model="newJourney.end_date"
              type="date">
          </div>
        <form>
          <div class="post-type">
          <label for="post_type">Post Type</label><br>
          <select ng-model="newPost.post_type">
            <option value="text">Text</option>
            <option value="photo">Photo</option>
            <option value="video">Video</option>
          </select>
          </div>
        <div class="post-properties">
          <div ng-if="newPost.post_type && currentJourney">
            <label for="title">Title</label><br>
            <input type="text" ng-model="newPost.title">
          </div>

          <div ng-if="newPost.post_type === 'text' && currentJourney">
            <h3>If text:</h3>
            <textarea ng-model="newPost.text" placeholder="type some shit"></textarea>
          </div>

          <div ng-if="newPost.post_type === 'photo' && currentJourney">
            <h3>If photo</h3>
            <input placeholder="photo url" type="text" ng-model="newPost.photo">
            <input placeholder="caption" type="text" ng-model="newPost.caption">
          </div>

          <div ng-if="newPost.post_type === 'video' && currentJourney">
            <h3>add a video.</h3>
            How would you like to add video?
            <button ng-click="setVideoMethod('url')">YouTube URL</button>
            <button ng-click="setVideoMethod('record')">Record</button>
            <!-- NEW VIDEO VIA URL -->
            <div ng-if="videoMethod === 'url'">
              <p>Paste your URL below:</p>
              <input placeholder="video url" type="text" ng-model="newPost.video">
            </div>
            <!-- NEW VIDEO VIA RECORD -->
            <div ng-if="videoMethod === 'record'">
            <iframe id="widget" type="text/html" width="640" height="390"
              src="https://www.youtube.com/upload_embed" frameborder="0"></iframe>
            <div ng-if="videoMethod">
              <p> Write a brief description of your video: </p>
              <input placeholder="caption" type="text" ng-model="newPost.caption">
            </div>
          </div>
        </div>
          <div ng-if="newPost.post_type && currentJourney">
            <!-- BUTTON IF EXISTING JOURNEY -->
            <button
              class="create-post"
              ng-if="currentJourney.id"
              ng-click="createPost(currentJourney.id, newPost)">
              <span class="arrow"><img src="/assets/blackarrow24.png" alt=""></span>
              Create Post
            </button>
            <!-- BUTTON IF NEW JOURNEY -->
            <button
              class="create-post"
              ng-if="currentJourney.id === undefined"
              ng-click="createJourney(newJourney, newPost)">
              <span class="arrow"><img src="/assets/blackarrow24.png" alt=""></span>
              Start Today
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
<div id="widget"></div>

   <script>
      // 2. Asynchronously load the Upload Widget and Player API code.
      var tag = document.createElement('script');
      tag.src = "https://www.youtube.com/iframe_api";
      var firstScriptTag = document.getElementsByTagName('script')[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

      // 3. Define global variables for the widget and the player.
      //    The function loads the widget after the JavaScript code
      //    has downloaded and defines event handlers for callback
      //    notifications related to the widget.
      var widget;
      var player;
      function onYouTubeIframeAPIReady() {
        widget = new YT.UploadWidget('widget', {
          width: 500,
          events: {
            'onUploadSuccess': onUploadSuccess,
            'onProcessingComplete': onProcessingComplete
          }
        });
      }

      // 4. This function is called when a video has been successfully uploaded.
      function onUploadSuccess(event) {
        alert('Video ID ' + event.data.videoId + ' was uploaded and is currently being processed.');
      }

      // 5. This function is called when a video has been successfully
      //    processed.
      function onProcessingComplete(event) {
        player = new YT.Player('player', {
          height: 390,
          width: 640,
          videoId: event.data.videoId,
          events: {}
        });
      }
    </script>